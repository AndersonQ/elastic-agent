 - generate agent certs
```shell
go run main.go -ips 10.80.40.42
```

 - generate fleet certs
```shell
go run main.go -ips 10.80.40.162
```
 - command with explanation, do not use it. Use the one below
```shell
./elastic-agent-8.14.0-SNAPSHOT-linux-x86_64/elastic-agent install -nf \
  --url=https://10.80.40.162:8220 \
  --fleet-server-port=8220 \
  --fleet-server-service-token=REDACTED \
  --fleet-server-policy=fleet-server-policy \
  --fleet-server-es=https://10.80.40.1:9200 \
  --fleet-server-es-ca-trusted-fingerprint=0665b6d0c751f71b05bedd0be21372d6fc7e3624381d1624befff87acd3ea009 \

  # fleet server certificate and key
  --fleet-server-cert=/root/localhost.pem \
  --fleet-server-cert-key=/root/localhost_key.pem \

  # require mTLS
  --fleet-server-client-auth=required \

  # this agent will connect to the fleet-server it runs, therefore the agent also needs its own TLS certificates
  # the fleet-server certificate CA for the agent to verify fleet-server's certificates
  # it might be mixed, it's fleets and agents CAs
  --certificate-authorities=/root/certs/fleet/ca.pem,/root/certs/agent/ca.pem \
  # the agent's TLS certificate
  --elastic-agent-cert=/root/certs/agent/localhost.pem \
  --elastic-agent-cert-key=/root/certs/agent/localhost_key.pem
```


 - generate RSA certs for charles using `elasticsearch-certutil  http`
 - convert it to pem
```shell
openssl pkcs12 -in ./elasticsearch/http.p12 -out fleet.key.pem -nocerts -nodes
openssl pkcs12 -in ./elasticsearch/http.p12 -out fleet.pem -nodes
```

```shell
./elastic-agent-8.14.0-SNAPSHOT-linux-x86_64/elastic-agent install -nf \
  --url=https://10.80.40.162:8220 \
  --fleet-server-port=8220 \
  --fleet-server-service-token=REDACTED \
  --fleet-server-policy=fleet-server-policy \
  --fleet-server-es=https://10.80.40.1:9200 \
  --fleet-server-es-ca-trusted-fingerprint=0665b6d0c751f71b05bedd0be21372d6fc7e3624381d1624befff87acd3ea009 \
  --fleet-server-cert=/root/certs/fleet/localhost.pem \
  --fleet-server-cert-key=/root/certs/fleet/localhost_key.pem \
  --fleet-server-client-auth=required \
  --certificate-authorities=/root/certs/fleet/ca.pem,/root/certs/agent/ca.pem \
  --elastic-agent-cert=/root/certs/agent/localhost.pem \
  --elastic-agent-cert-key=/root/certs/agent/localhost_key.pem
```
